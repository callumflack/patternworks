!function(o){"use strict";"function"==typeof define&&define.amd?define(["jquery"],o):o("object"==typeof exports?require("jquery"):jQuery)}(function(o){"use strict";function t(t,e){this.element=t,this.$element=o(t),this.options=o.extend({},i,e),this._defaults=i,this._name=s,this.init()}var s="colorScroll",e=window.document,r=o(e),n=o(window),i={colors:[{color:"#FFFFFF",position:"0%"},{color:"#000000",position:"100%"}],scrollElement:r,fauxScroll:!1},c=function(){var o=e.createElement("div"),t=o.style;return t.cssText="background-color:rgba(150,255,150,.5)",(""+t.backgroundColor).indexOf("rgba")>-1}(),l=function(o){return function(t,s){return t[o]<s[o]?-1:t[o]>s[o]?1:0}},a=function(o,t,s){var e="rgb"+(c?"a":"")+"("+parseInt(o[0]+s*(t[0]-o[0]),10)+","+parseInt(o[1]+s*(t[1]-o[1]),10)+","+parseInt(o[2]+s*(t[2]-o[2]),10);return c&&(e+=","+(o&&t?parseFloat(o[3]+s*(t[3]-o[3])):1)),e+=")"},h=function(o){var t,s;return(t=/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})/.exec(o))?s=[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16),1]:(t=/#([0-9a-fA-F])([0-9a-fA-F])([0-9a-fA-F])/.exec(o))?s=[17*parseInt(t[1],16),17*parseInt(t[2],16),17*parseInt(t[3],16),1]:(t=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(o))?s=[parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3],10),1]:(t=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9\.]*)\s*\)/.exec(o))&&(s=[parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3],10),parseFloat(t[4])]),s};t.prototype={colors:[],init:function(){this.setPositions(),this.currentColor=this.$element.css("background-color"),this.updateColor(),this.addListeners()},addListeners:function(){var t=this;this.options.scrollElement.on("scroll",o.proxy(this.updateColor,this)),n.on("debouncedresize",function(){t.setPositions(),t.updateColor()})},setPositions:function(){for(var o=r.height()-n.height(),t=[],s=0;s<this.options.colors.length;s++){var e={},i=this.options.colors[s].position;e.color=this.options.colors[s].color,e.position="string"==typeof i?"%"===i.charAt(i.length-1)?Math.floor(parseFloat(i)*o/100):parseFloat(i):i,t.push(e)}t.sort(l("position")),this.colors=t},updateColor:function(){var o,t,s,e,n=r.scrollTop();if(n<=this.colors[0].position)this.setColor(this.colors[0].color);else if(n>=this.colors[this.colors.length-1].position)this.setColor(this.colors[this.colors.length-1].color);else{for(var i=0;i<this.colors.length;i++){if(!(n>=this.colors[i].position)){t=this.colors[i].position,e=this.colors[i].color;break}o=this.colors[i].position,s=this.colors[i].color}var c=(n-o)/(t-o),l=a(h(s),h(e),c);this.setColor(l)}},setColor:function(o){o!==this.currentColor&&(this.$element.css("background-color",o),this.currentColor=o)}},o.fn[s]=function(e){return this.each(function(){o.data(this,"plugin_"+s)||o.data(this,"plugin_"+s,new t(this,e))})}}),function(o){"use strict";var t,s,e=o.event;t=e.special.debouncedresize={setup:function(){o(this).on("resize",t.handler)},teardown:function(){o(this).off("resize",t.handler)},handler:function(o,r){var n=this,i=arguments,c=function(){o.type="debouncedresize",e.dispatch.apply(n,i)};s&&clearTimeout(s),r?c():s=setTimeout(c,t.threshold)},threshold:150}}(jQuery);
